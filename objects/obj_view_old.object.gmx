<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_view</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>-3000</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Variables

id.target = global.active_character;

// Target position.
id.x_target = 0;
id.y_target = 0;

// Adjustments on the view anchor point.
id.x_offset = 0;
id.y_offset = -20;

id.state = scr_unlock_state;
id.shake = false;
id.spd = 3 / room_speed;
id.shift_spd = 80;
id.dir = target.dir;
id.last_dir = dir;

//input
id.device = id.target.device;
id.deadzone = 0.2;
id.lock = 0;
id.c_switch = 0;
id.hor = 0;
id.ver = 0;

// Start on the target.
if (instance_exists(id.target)) {
    id.x = id.target.x;
    id.y = id.target.y;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Get Input

scr_view_input(device, deadzone);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Character Switch

/*if (target.control == HUMAN) {
    if (c_switch) {
        target.control = CPU;
        target = target.mate;
        target.nearest_enemy = instance_nearest(target.x, target.y, obj_enemy_parent);
        target.control = HUMAN;
        global.active_character = target;
    }
}*/
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Choose State

if (lock &amp;&amp; state != scr_lock_state) {
    if (instance_exists(obj_enemy_parent)) {
        with (target) {
            nearest_enemy = instance_nearest(x, y, obj_enemy_parent);
            nearest_enemy.locked = true;
            dir = point_direction(x, y, nearest_enemy.x, nearest_enemy.y);
            //face_dir = dir;
            face = scr_dir_to_face(dir);
        }
        state = scr_lock_state;
    }
} else if (lock &amp;&amp; state == scr_lock_state) {
    target.nearest_enemy.locked = false;
    state = scr_unlock_state;
} else if (global.inventory_open) {
    state = scr_unlock_state;
} else if (instance_exists(target) &amp;&amp; target.aim) {
    state = scr_view_aim_state;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Execute State

script_execute(state);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Keep Things Close

obj_global.x = self.x;
obj_global.y = self.y;

if (instance_exists(obj_shader_controller)) {
    obj_shader_controller.x = self.x;
    obj_shader_controller.y = self.y;
}
if (instance_exists(obj_particle_controller)) {
    obj_particle_controller.x = self.x;
    obj_particle_controller.y = self.y;
}
if (instance_exists(obj_inventory_controller)) {
    obj_inventory_controller.x = self.x;
    obj_inventory_controller.y = self.y;
}
if (instance_exists(obj_debug)) {
    obj_debug.x = self.x;
    obj_debug.y = self.y;
}
if (instance_exists(obj_parallax_controller)) {
    obj_parallax_controller.x = self.x;
    obj_parallax_controller.y = self.y;
}
if (instance_exists(obj_score_controller)) {
    obj_score_controller.x = self.x;
    obj_score_controller.y = self.y;
}
if (instance_exists(obj_spawn_controller)) {
    obj_spawn_controller.x = self.x;
    obj_spawn_controller.y = self.y;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Update the position

if (!instance_exists(obj_view)) {
    instance_create(target.x, target.y, obj_view);
}

self.x = target.x + self.x_offset;
self.y = target.y + self.y_offset;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create the View Object

if (!instance_exists(obj_view)) {
    instance_create(target.x, target.y, obj_view);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
